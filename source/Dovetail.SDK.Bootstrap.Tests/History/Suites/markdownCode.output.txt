\t*** Performed by: Mark Miller, 5585555555\r\n\r\n```\r\nusing FubuLocalization;\r\n\r\nnamespace Agent.Core.Domain.Commands.Policies\r\n{\r\n\tpublic class MustNotContainOpenSubcases : IEntityCommandValidationPolicy\r\n\t{\r\n\t\tpublic MustNotContainOpenSubcases()\r\n\t\t{\r\n\t\t\tToken = UserMessageKeys.CANNOT_CLOSE_A_CASE_WITH_OPEN_GENERAL_SUBCASES;\r\n\t\t}\r\n\r\n\t\tpublic StringToken Token { get; set; }\r\n\r\n\t\tpublic void Validate(EntityCommandValidationContext context)\r\n\t\t{\r\n\t\t\tvar entity = context.Entity\u0026lt;IWorkflowEntity\u0026gt;() as Case;\r\n\t\t\tif (entity == null) return;\r\n\r\n\t\t\tif (entity.HasOpenGeneralSubcases)\r\n\t\t\t{\r\n\t\t\t\tcontext.RegisterMessage(Token);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n
