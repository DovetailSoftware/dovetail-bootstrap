"\u003cp\u003e\t*** Performed by: Mark Miller, 5585555555\u003c/p\u003e\r\n\u003cp\u003e```\u003cbr/\u003e\r\nusing FubuLocalization;\u003c/p\u003e\r\n\u003cp\u003enamespace Agent.Core.Domain.Commands.Policies\u003cbr/\u003e\r\n{\u003cbr/\u003e\r\n\tpublic class MustNotContainOpenSubcases : IEntityCommandValidationPolicy\u003cbr/\u003e\r\n\t{\u003cbr/\u003e\r\n\t\tpublic MustNotContainOpenSubcases()\u003cbr/\u003e\r\n\t\t{\u003cbr/\u003e\r\n\t\t\tToken = UserMessageKeys.CANNOT_CLOSE_A_CASE_WITH_OPEN_GENERAL_SUBCASES;\u003cbr/\u003e\r\n\t\t}\u003c/p\u003e\r\n\u003cp\u003epublic StringToken Token { get; set; }\u003c/p\u003e\r\n\u003cp\u003epublic void Validate(EntityCommandValidationContext context)\u003cbr/\u003e\r\n\t\t{\u003cbr/\u003e\r\n\t\t\tvar entity = context.Entity\u0026lt;IWorkflowEntity\u0026gt;() as Case;\u003cbr/\u003e\r\n\t\t\tif (entity == null) return;\u003c/p\u003e\r\n\u003cp\u003eif (entity.HasOpenGeneralSubcases)\u003cbr/\u003e\r\n\t\t\t{\u003cbr/\u003e\r\n\t\t\t\tcontext.RegisterMessage(Token);\u003cbr/\u003e\r\n\t\t\t}\u003cbr/\u003e\r\n\t\t}\u003cbr/\u003e\r\n\t}\u003cbr/\u003e\r\n}\u003cbr/\u003e\r\n```\u003c/p\u003e\r\n"